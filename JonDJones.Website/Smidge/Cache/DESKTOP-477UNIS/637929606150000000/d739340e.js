!function(){"use strict";angular.module("umbraco.filters",[]),angular.module("umbraco.filters").filter("compareArrays",function(){return function inArray(array,compareArray,compareProperty){if(!compareArray||!compareArray.length)return[...array];var result=[];return array.forEach(function(arrayItem){var exists=!1;compareArray.forEach(function(compareItem){arrayItem[compareProperty]===compareItem[compareProperty]&&(exists=!0)}),exists||result.push(arrayItem)}),result}});var ncNodeNameCache={id:"",keys:{}};angular.module("umbraco.filters").filter("ncNodeName",function(editorState,entityResource){function formatLabel(firstNodeName,totalNodes){return totalNodes<=1?firstNodeName:firstNodeName+" (+"+(totalNodes-1)+")"}return function(input){if(""===input||"0"===input.toString())return"";var key="ncNodeName_"+editorState.getCurrent().key;ncNodeNameCache.id!==key&&(ncNodeNameCache.id=key,ncNodeNameCache.keys={});var ids=input.split(","),lookupId=ids[0];if(ncNodeNameCache.keys[lookupId])return formatLabel(ncNodeNameCache.keys[lookupId],ids.length);ncNodeNameCache.keys[lookupId]="Loading...";var type=0===lookupId.indexOf("umb://media/")?"Media":0===lookupId.indexOf("umb://member/")?"Member":"Document";return entityResource.getById(lookupId,type).then(function(ent){ncNodeNameCache.keys[lookupId]=ent.name}),formatLabel(ncNodeNameCache.keys[lookupId],ids.length)}}).filter("ncRichText",function(){return function(input){return $("<div/>").html(input).text()}}),angular.module("umbraco.filters").filter("preserveNewLineInHtml",function(){return function(text){return text?text.replace(/\n/g,"<br />"):""}}),angular.module("umbraco.filters").filter("safe_html",["$sce",function($sce){return function(text){return $sce.trustAsHtml(text)}}]),angular.module("umbraco.filters").filter("simpleMarkdown",function(){return function(text){return text?text.replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2' target='_blank' rel='noopener' class='underline'>$1</a>").replace(/\n/g,"<br />").trim():""}}),angular.module("umbraco.filters").filter("simpleMarkdown",function(){return function(text){return text?text.replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").replace(/!\[(.*?)\]\((.*?)\)/gim,"<img alt='$1' src='$2' />").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2' target='_blank' class='underline'>$1</a>").replace(/\n/g,"<br />").trim():""}}),angular.module("umbraco.filters").filter("timespan",function(){return function(input){var sec_num=parseInt(input,10),hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;return hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),hours+":"+minutes+":"+seconds}}),angular.module("umbraco.filters").filter("truncate",function(){return function(value,wordwise,max,tail){if(!value)return"";if("boolean"!=typeof wordwise&&(!0!==max&&(tail=""),max=wordwise,wordwise=!1),!(max=parseInt(max,10)))return value;if(value.length<=max)return value;if(tail=tail||""===tail?tail:"â€¦",wordwise&&" "===value.substr(max,1)&&max++,value=value.substr(0,max),wordwise){var lastspace=value.lastIndexOf(" ");-1!==lastspace&&(value=value.substr(0,lastspace+1))}return value+tail}}),angular.module("umbraco.filters").filter("umbCmsBlockCard",function(){return function(array,searchTerm){if(array){if(searchTerm){const term=searchTerm.toLowerCase();return array.filter((block,i)=>{const props=["id","key","udi","alias","name","description"];let found=!1;for(let i=0;i<props.length;i++)block.elementTypeModel.hasOwnProperty(props[i])&&null!=block.elementTypeModel[props[i]]&&""!==block.elementTypeModel[props[i]]&&block.elementTypeModel[props[i]].toString().toLowerCase().includes(term)&&(found=!0);return found})}return array}}}),angular.module("umbraco.filters").filter("umbCmsJoinArray",function(){return function join(array,separator,prop){return"object"==typeof array&&array?(separator=separator||"",(Utilities.isUndefined(prop)?array:array.map(item=>item[prop])).join(separator)):array||""}}),angular.module("umbraco.filters").filter("umbCmsTitleCase",function(){return function(str){return str.replace(/\w\S*/g,txt=>txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase())}}),function(){angular.module("umbraco.filters").filter("umbWordLimit",function umbWordLimitFilter(){return function(collection,property){if(!Utilities.isString(collection))return collection;if(Utilities.isUndefined(property))return collection;var array=[];return(array=collection.split(" ",property)).length=property,array.join(" ")}})}()}();